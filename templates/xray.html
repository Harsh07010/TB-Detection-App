{% extends "base.html" %}

{% block title %}X-ray Analysis - TB Detection System{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto text-center">
  <h1 class="text-2xl font-bold text-gray-800 mb-6">Upload Chest X-ray</h1>

  <div class="bg-blue-50 p-6 rounded-lg mb-8">
    <p class="text-gray-600 mb-4">
      Upload a clear chest X-ray image for our AI system to analyze for potential signs of tuberculosis.
    </p>
    <p class="text-sm text-gray-500 mb-2">
      Supported formats: JPG, PNG (max 10MB)
    </p>
  </div>

  <form method="POST" enctype="multipart/form-data" class="space-y-6">
    <div
      class="flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-lg p-8 bg-white">
      <label for="xray_image" class="cursor-pointer text-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-gray-400 mb-3" fill="none"
          viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
        </svg>
        <span class="text-primary font-medium">Click to select X-ray image</span>
        <span class="text-sm text-gray-500 block mt-1">or drag and drop</span>
        <input id="xray_image" name="xray_image" type="file" class="hidden" required accept="image/*"
          onchange="updateFileName(this)">
      </label>
      <div id="file-name" class="mt-3 text-sm text-gray-500"></div>
    </div>

    <div>
      <button type="submit" class="btn btn-primary px-8 py-3 text-lg">Analyze X-ray</button>
    </div>
  </form>

  <div class="mt-8 text-sm text-gray-500">
    <p>Note: This analysis is for screening purposes only and should not replace professional medical advice.</p>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  function updateFileName(input) {
    const fileName = input.files[0]?.name;
    document.getElementById('file-name').textContent = fileName || '';
  }
</script>
{% endblock %}